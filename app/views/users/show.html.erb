<div class="container">
	
	<!-- Icons edit & delete top -->
	<div class="icons-top">
		<div class="icon-edit">
		<%= link_to edit_user_path(@user), class: "btn" do %>
		  <i class="fas fa-edit"></i>
		<% end %>
		</div>
		
		<!-- Name definition for delete alert message -->
		<% if @user.first_name == nil || @user.first_name == "" %>
			<% user_name = "Name undefined" %>
		<% else %>
			<% user_name = @user.first_name + " " + @user.last_name %>
		<% end %>

		<div class="icon-delete">
			<%= link_to user_path(@user),
			      method: :delete,
			      data: { confirm: "Are you sure you want to delete User ##{@user.id} - #{user_name}?" },
			      class: "btn" do %>
					<i class="fas fa-trash-alt"></i>
			<% end %>
		</div>
	</div>
	
	<!-- Card with name, avatar and email -->
	<div class="row align-items-center bg-white py-3 rounded-lg shadow-sm" id="name-card">
    <!-- Avatar -->
    <div class="col-3 ml-1">
      <%#= image_tag "https://kitt.lewagon.com/placeholder/users/cveneziani", class: "avatar-large", alt: "avatar-large" %>
      <% if @user.photo.attached? %>
      	<%= cl_image_tag @user.photo.key, :transformation=>[
      	  	  {:width=>400, :height=>400, :gravity=>"face", :radius=>"max", :crop=>"thumb"},
      	  	  {:width=>200, :crop=>"scale"}
      	  	  ], class: "avatar-large", alt: "avatar-large" %>
			<% else %>
				<%= image_tag "default_avatar_square", class: "avatar-large", alt: "avatar-large" %>
      <% end %>
    </div>
    
    <!-- Name -->
    <div class="col-7 card-name">
      <h1><strong><%= @user.first_name %> <%= @user.last_name %></strong></h1>
      <p><%= mail_to @user.email %></p>
    </div>
    
		<!-- Badge showing if admin or student -->
    <% if @user.admin? %>
	    <div class="user-admin">
	      <h2 class="badge-admin"><strong>Admin</strong></h2>
	    </div>	  
     <% else %>
			<div class="student-admin">
	      <h2 class="badge-admin"><strong>Student</strong></h2>
	    </div>
     <% end %>
  </div>

	<br>
	
	<!-- Profile cards -->
	<div class="row row-cols-1 row-cols-md-2">
	  
	  <!-- Card personal details -->
	  <div class="col mb-4">
	    <div class="card border-0 b rounded-lg shadow-sm">
	      <div class="card-body">
	        <h5 class="card-title"><strong>Personal Info</strong></h5>
	        <br>
	        <p class="card-text">
	        	Birthday: <% if @user.date_of_birth == nil %>
	        		<span class="n-a"><%= "n/a" %></span>
						<% else %>
	        		<%= @user.date_of_birth.strftime("%d.%m.%Y") %>
	        	<% end %>
	        	</p>
	        <p class="card-text">
	        	Age: <% if @user.date_of_birth == nil %>
	        		<span class="n-a"><%= "n/a" %></span>
						<% else %>
	        		<%= @user.age? %>
	        	<% end %>
	        	</p>
	        <p class="card-text">
	        	Phone: <% if @user.phone == "" || @user.phone == nil %>
	        		<span class="n-a"><%= "n/a" %></span>
	        	<% else %> 
	        		<%= @user.phone %>
	        	<% end %>
	        	</p>
	      </div>
	    </div>
	  </div>
	   
		<!-- Club affilitation -->
		<div class="col mb-4">
	    <div class="card border-0 b rounded-lg shadow-sm">
	      <div class="card-body">
	        <h5 class="card-title"><strong>Club affiliation</strong></h5>
	        <br>
	        <p class="card-text">
	        	Member since: <% if @user.started == nil %>
							<span class="n-a"><%= "n/a" %></span>
						<% else %>
	        		<%= @user.started.strftime("%d.%m.%Y") %>
	        	<% end %>
	        		</p>
	        <p class="card-text">
	        	Joined: <% if @user.started == nil %>
	        		<span class="n-a"><%= "n/a" %></span>
	        	<% else %>
	        		<strong><%= @user.date_diff(@user.started, Date.today) %></strong> ago
						<% end %>
	        	</p>
	        <p class="card-text">Profile created: <%= @user.created_at.strftime("%d.%m.%Y") %></p>
	        <p class="card-text">
	        	Active: <% if @user.active_member == true %>
	        		<i class="fas fa-check-circle"></i>
	        	<% else %>
	        		<i class="fas fa-times-circle"></i>
	        	<% end %>
	        </p>
	        <p class="card-text">Why (not active): <%= @user.not_active_why %></p>
	      </div>
	    </div>
	  </div>

		<!-- BJJ level -->
		<div class="col mb-4">
	    <div class="card border-0 b rounded-lg shadow-sm">
	      <div class="card-body">
	        <h5 class="card-title"><strong>BJJ level</strong></h5>
	        <br>
	        <p class="card-text">
	        	Belt: <% if @user.belt == "" || @user.belt == nil %>
	        		<span class="n-a"><%= "n/a" %></span>
	        	<% else %>
	        		<%= @user.belt %>
	        	<% end %>
	        	</p>
	        <p class="card-text">
	        	Last promotion: <% if @user.last_promotion == nil %>
	        		<span class="n-a"><%= "n/a" %></span>
						<% else %>
	        		<%= @user.last_promotion.strftime("%d.%m.%Y") %>
	        	<% end %>
	        	</p>
	        <p class="card-text">
	        	Promoted <% if @user.last_promotion == nil %>
							<span class="n-a"><%= "n/a" %></span>
						<% else %>
	        		<strong><%= @user.date_diff(@user.last_promotion, Date.today) %></strong> ago
						<% end %>
	        	</p>
	      </div>
	    </div>
	  </div>

	  	<!-- Measurements -->
		<div class="col mb-4">
	    <div class="card border-0 b rounded-lg shadow-sm">
	      <div class="card-body">
	        <h5 class="card-title"><strong>Measurements</strong></h5>
	        <br>
	        <p class="card-text">
	        	Height: <% if @user.height == nil || @user.height == "" %>
	        		<span class="n-a"><%= "n/a" %></span>
	        	<% else %>
	        		<%= @user.height %> cm
	        	<% end %>
	        	</p>
	        <p class="card-text">
	        	Weight: <% if @user.weight == nil || @user.weight == "" %>
	        		<span class="n-a"><%= "n/a" %></span>
	        	<% else %>
	        		<%= @user.weight %> kg
	        	<% end %>
	        	</p>
	        <p class="card-text">
	        	Weight good: <% if @user.weight_good == nil %>
	        		<span class="n-a"><%= "n/a" %></span>
	        	<% elsif @user.weight_good == true %>
	        		<i class="fas fa-check-circle"></i>
	        	<% else %>
	        		<i class="fas fa-times-circle"></i>
	        	<% end %>
	        	</p>
	        <p class="card-text">Reasons: <%= @user.reasons_for_weight %></p>
	      </div>
	    </div>
 		</div>
		<br>
 
 	</div>
	
	<!-- Comments cards -->
	<% if current_user.admin? %>

	<div class="comments"><h4 class="ml-3"><strong>Comments</strong></h4>
		<div class="add-comment">
			<%= link_to edit_user_path(@user), class: "btn" do %>
				<i class="fas fa-plus-square"></i>
			<% end %>
		</div>
	</div>			
		<% if @user.comments.empty? %>
			<p><%= "No comments yet" %></p>
		<% else %>
			<% @user.comments.each do |comment| %>
				<div class="row row-cols-1 row-cols-sm-1">
					<div class="col mb-4">
						<div class="card border-0 b rounded-lg shadow-sm comment-card">
							<div class="card-body">
														
								<h5><strong><%= comment.category %>:</strong></h5>
								<p><%= comment.content %></p>
								
								<div class="comment-actions">
									<div class="icon-edit">
									<%= link_to edit_user_path(@user), class: "btn" do %>
									  <i class="fas fa-edit"></i>
									<% end %>
									</div>
									
									<div class="icon-delete">
										<%= link_to user_path(@user),
										      method: :delete,
										      data: { confirm: "Are you sure you want to delete this comment?" },
										      class: "btn" do %>
												<i class="fas fa-trash-alt"></i>
										<% end %>
									</div>
								</div>

							</div>	
						</div>
					</div>
				</div>
			<% end %>
		<% end %>
	<% end %>

	<%= link_to "Edit Profile", edit_user_path(@user), class: "btn btn-warning px-4" %>
	<%= link_to "Delete Profile", user_path(@user),
	      method: :delete,
	      data: { confirm: "Are you sure you want to delete user ##{@user.id} - #{user_name}?" },
	      class: "btn btn-danger" %>

</div>


  <!-- not_active_why:													(string) -->

  <!-- email:																		(string) -->
  <!-- encrypted_password:											(string) -->
  <!-- reset_password_token:										(string) -->
  <!-- reset_password_sent_at: 									(datetime) -->
  <!-- remember_created_at:											(datetime) -->
  <!-- created_at: 															(datetime) -->
  <!-- updated_at:															(datetime) -->
  <!-- admin: 																	(boolean) -->
  <!-- first_name: 															(string) -->
  <!-- last_name:																(string) -->
  <!-- date_of_birth:														(date)	 -->
  <!-- phone:																		(string) -->
  <!-- started:																	(date) -->
  <!-- weight:  																(integer) -->
  <!-- height:																	(integer) -->
  <!-- weight_good: 														(boolean) -->
  <!-- reasons_for_weight:											(string) -->
  <!-- active_member: 													(boolean) -->
  <!-- not_active_why:													(string) -->
  <!-- belt:																		(string) -->
  <!-- last_promotion:													(date) -->







